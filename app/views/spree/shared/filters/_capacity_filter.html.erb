<!-- TODO: can be refacto in the same partial with color_filter, and model_filter -->
<% capacity_filter = checkbox_product_filter('capacity') %>
<% capacity_option_type = Spree::OptionType.find_by(name: 'capacity') %>
<% if capacity_filter.present? %>
  <div class="product-filter">
    <div class="product-filter-content">
      <h6 class="product-filter-title"><%= t('spree.capacity') %></h6>
      <ul>
        <% capacity_filter.each do |capacity, capacity_id| %>
          <li>
            <input type="checkbox"
                    id="<%= capacity_id %>"
                    name="<%= "search[with_option][#{capacity_option_type.id}][]" %>"
                    value="<%= capacity_id %>"
                    <%= params.dig(:search, :with_option, capacity_option_type.id.to_s)&.include?(capacity_id.to_s) ? "checked" : "" %>
            />
            <label class="product-filter-label" for="<%= capacity_id %>">
              <span><%= capacity %></span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
              </svg>
            </label>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
<% end %>