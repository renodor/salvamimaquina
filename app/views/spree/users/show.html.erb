<h1><%= t('spree.my_account') %></h1>
<ul class="nav nav-tabs" id="user-account-tabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="user-address-tab" data-bs-toggle="tab" data-bs-target="#user-address" type="button" role="tab" aria-controls="user-address" aria-selected="true">Shipping Address</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="user-order-tab" data-bs-toggle="tab" data-bs-target="#user-orders" type="button" role="tab" aria-controls="user-orders" aria-selected="false">Orders</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="user-credentials-tab" data-bs-toggle="tab" data-bs-target="#user-credentials" type="button" role="tab" aria-controls="user-credentials" aria-selected="false">Datos personales</button>
  </li>
</ul>
<div class="tab-content" id="user-account">
  <div class="tab-pane fade show active" id="user-address" role="tabpanel" aria-labelledby="user-address-tab">
    <div class="position-relative">
      <span class="edit-user-account">
        <%= link_to svg('pen'), spree.edit_account_path(anchor: 'edit-user-address') %>
      </span>
      <p><%= @address.name %></p>
      <p><%= @address.address1 %></p>
      <p><%= @address.address2 %></p>
      <p><%= @address.phone %></p>
      <p><%= @address.district&.name %></p>
      <p><%= @address.state&.name %></p>
      <p><%= @address.city %></p>
    </div>
    <div id="static-map" style="width: 100%; height: 300px;" data-latitude="<%= @address.latitude %>" data-longitude="<%= @address.longitude %>"></div>
  </div>
  <div class="tab-pane fade" id="user-orders" role="tabpanel" aria-labelledby="user-order-tab">
    <div data-hook="account_my_orders" class="account-my-orders">
      <h3><%= t('spree.my_orders') %></h3>
      <% if @orders.present? %>
        <table class="order-summary">
          <thead>
          <tr>
            <th class="order-number"><%= t(:number, scope: 'activerecord.attributes.spree/order') %></th>
            <th class="order-date"><%= t('spree.date') %></th>
            <th class="order-status"><%= t('spree.status') %></th>
            <th class="order-payment-state"><%= t('spree.payment_state') %></th>
            <th class="order-shipment-state"><%= t('spree.shipment_state') %></th>
            <th class="order-total"><%= t('spree.total') %></th>
          </tr>
          </thead>
          <tbody>
          <% @orders.each do |order| %>
            <tr class="<%= cycle('even', 'odd') %>">
              <td class="order-number"><%= link_to order.number, order_url(order) %></td>
              <td class="order-date"><%= l order.completed_at.to_date %></td>
              <td class="order-status"><%= t("spree.order_state.#{order.state}").titleize %></td>
              <td class="order-payment-state"><%= t("spree.payment_states.#{order.payment_state}").titleize if order.payment_state %></td>
              <td class="order-shipment-state"><%= t("spree.shipment_states.#{order.shipment_state}").titleize if order.shipment_state %></td>
              <td class="order-total"><%= order.display_total %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
      <% else %>
        <p><%= t('spree.you_have_no_orders_yet') %></p>
      <% end %>
      <br />
    </div>
  </div>
  <div class="tab-pane fade" id="user-credentials" role="tabpanel" aria-labelledby="user-credentials-tab">
    <div class="user-info">
      <p><%= @user.email %> (<%= link_to t('spree.edit'), spree.edit_account_path %>)</p>
    </div>
  </div>
</div>